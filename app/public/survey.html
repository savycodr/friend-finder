<!doctype html>
<html lang="en">
  <head>
    <title>Frien Finder</title>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

    <!-- Bootstrap CSS -->
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">

    <!-- Font Awesome CSS-->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.8.1/css/all.css" integrity="sha384-50oBUHEmvpQ+1lW4y57PTFmhCaXp0ML5d60M1M7uH2+nqUivzIebhndOJK28anvf" crossorigin="anonymous">


    <style>
        body {
          font-family: Arial, Helvetica, sans-serif;
        }
        
        h1 {
          font-family: inherit;
          font-weight: 500;
          font-size: 63px;
          line-height: 1.1;
        } 

        h4{
          font-size: 18px;
        }

        h1, h2, h3, h4 {
          margin-top: 20px;
          margin-bottom: 10px;
        }


    </style>    

  </head>
  <body>
    <div class="container">
      <h2> Survey Questions</h2>
      <hr>
      <h3><strong>About You</strong></h3>
      <h4>Name (Required)</h4>
      <div class="input-group mb-3" >
        <input type="text" id="name" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default" required`>
      </div>
      <h4>Link to Photo Image (Required)</h4>
      <div class="input-group mb-3">
        <input type="text" id="photoUrl" class="form-control" aria-label="Default" aria-describedby="inputGroup-sizing-default">
      </div>
      <h3><strong>Question 1</strong></h3>
      <h4>Web Development is an attractive skill.</h4>
      <div class="form-group col-md-3" style="padding: 0px;">
        <select id="question1" class="form-control">
          <option value="default" selected>Select an Option</option>
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div> 
      <h3><strong>Question 2</strong></h3>
      <h4>Cats are one of life's greatest gifts.</h4>
      <div class="form-group col-md-3" style="padding: 0px;">
        <select id="question2" class="form-control">
          <option value="default" selected>Select an Option</option>
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>   
      <h3><strong>Question 3</strong></h3>
      <h4>The best time to go Christmas shopping is December 24.</h4>
      <div class="form-group col-md-3" style="padding: 0px;">
        <select id="question3" class="form-control">
          <option value="default" selected>Select an Option</option>
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>
      <h3><strong>Question 4</strong></h3>
      <h4>A walk on the beach beats down hill skiing.</h4>
      <div class="form-group col-md-3" style="padding: 0px;">
        <select id="question4" class="form-control">
          <option value="default" selected>Select an Option</option>
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>  
      <h3><strong>Question 5</strong></h3>
      <h4>Spongebob is funnier than The Simpsons.</h4>
      <div class="form-group col-md-3" style="padding: 0px;">
        <select id="question5" class="form-control">
          <option value="default" selected>Select an Option</option>
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div> 
      <h3><strong>Question 6</strong></h3>
      <h4>Golf is the best game on TV.</h4>
      <div class="form-group col-md-3" style="padding: 0px;">
        <select id="question6" class="form-control">
          <option value="default" selected>Select an Option</option>
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>  
      <h3><strong>Question 7</strong></h3>
      <h4>Silk is better than denim.</h4>
      <div class="form-group col-md-3" style="padding: 0px;">
        <select id="question7" class="form-control">
          <option value="default" selected>Select an Option</option>
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>
      <h3><strong>Question 8</strong></h3>
      <h4>Diner and dancing beats dinner and a movie.</h4>
      <div class="form-group col-md-3" style="padding: 0px;">
        <select id="question8" class="form-control">
          <option value="default" selected>Select an Option</option>
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div> 
      <h3><strong>Question 9</strong></h3>
      <h4>Mr. Nobody is one of the greatest movies.</h4>
      <div class="form-group col-md-3" style="padding: 0px;">
        <select id="question9" class="form-control">
          <option value="default" selected>Select an Option</option>
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div>  
      <h3><strong>Question 10</strong></h3>
      <h4>Playstation is more fun than a good book.</h4>
      <div class="form-group col-md-3" style="padding: 0px;">
        <select id="question10" class="form-control">
          <option value="default" selected>Select an Option</option>
          <option>1 (Strongly Disagree)</option>
          <option>2</option>
          <option>3</option>
          <option>4</option>
          <option>5 (Strongly Agree)</option>
        </select>
      </div> 
      <!-- <a  href="\" id="submit" class="btn btn-lg col-md-12" style="background-color:#3379B7; color: white;" data-toggle="modal" data-target="#exampleModal"><h4><i class="far fa-check-square"></i> -->
        <button  id="submit" class="btn btn-lg col-md-12" style="background-color:#3379B7; color: white;" value="Submit"><h4><i class="far fa-check-square"></i>
          Submit</h4></button>


      <div class="modal" id="exampleModal" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
          <div class="modal-content">
            <div class="modal-header">
              <h2 class="modal-title"><strong>Best Match</strong></h2>
              <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                <span aria-hidden="true">&times;</span>
              </button>
            </div>
            <div class="modal-body" id="friendInfo">
              <p>Modal body text goes here.</p>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-outline-secondary" data-dismiss="modal">Close</button>
            </div>
          </div>
        </div>
      </div>

    </div>
    <!-- jQuery first, then Popper, then Bootstrap JS -->
  <!-- jQuery -->
  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js" integrity="sha384-UO2eT0CpHqdSJQ6hJty5KVphtPhzWj9WO1clHTMGa3JDZwrnQq4sF86dIHNDz0W1" crossorigin="anonymous"></script>    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js" integrity="sha384-JjSmVgyd0p3pXB1rRibZUAYoIIy6OrQ6VrjIEaFf/nJGzIxFDsf4x0xIM+B07jRM" crossorigin="anonymous"></script>

<!--  CODE IS TO HANDLE HOW FORM DATA IS SENT TO OUR SERVER -->
<script type="text/javascript">
$(document).ready(function(){
    // In this code below we create the Front-end JavaScript which "POSTS" our form data to our express server.
  // In essence, when the user hits submit, jQuery grabs all of the fields then sends a post request to our api
  // Our api recognizes the route (/api/friends)... and then runs the associated code (found in api-routes.js).
  // In this case the associated code "saves" the data to the friends.js file 

  $("#submit").on("click", function(event) {
    event.preventDefault();

    var scores = [];
    for (var i=1; i<11; i++)
    {
      var number = $("#question"+i).val().charAt(0);
      scores.push(parseInt(number));
    }

    // Here we grab the form elements
    var newFriend = {
      name: $("#name").val().trim(),
      photoUrl: $("#photoUrl").val().trim(),
      scores: scores
    };

    console.log("submit was fired");
    console.log(newFriend);

    // This line uses a standard ajax function.
    // Essentially we give it a URL, we give it the object we want to send, then we have a "callback".
    // The callback is the response of the server. In our case, we set up code in api-routes that return the Friend that is most compatible

    $.post("/api/friends", newFriend,
      function(data) {

        // Tell user who they are compatible with. Modify the modal with BestFriend information and display to the user.
        var modalInfo = $("#friendInfo");
        if (data) {

          modalInfo.text("Your matched with " + data.name.toUpperCase() + "!");

        }
        else {
          modalInfo.text("Sorry something went wrong");
        }
        $("#exampleModal").modal('show');  

        // Clear the form when submitting
        $("#name").val("");
        $("#photoUrl").val("");
        $("#question1").val('default');        
        $("#question2").val('default'); 
        $("#question3").val('default'); 
        $("#question4").val('default'); 
        $("#question5").val('default'); 
        $("#question6").val('default'); 
        $("#question7").val('default'); 
        $("#question8").val('default'); 
        $("#question9").val('default'); 
        $("#question10").val('default'); 


      }); // end of post

  }); // end of submit
}); // end of document ready

  </script>
  </body>
</html>